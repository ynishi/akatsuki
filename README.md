# ğŸš€ Akatsuki (æš) Template

**VITE + React + Shuttle (Axum) + Supabase + AIGen çµ±åˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**

`Akatsuki` ã¯ã€AIæ©Ÿèƒ½ã‚’ã€Œæ¯ã‚’å¸ã†ã‚ˆã†ã«ã€çµ„ã¿è¾¼ã‚ã‚‹ã€**0â†’1ãƒ•ã‚§ãƒ¼ã‚ºã®æœ€é€Ÿç«‹ã¡ä¸Šã’** ã«ç‰¹åŒ–ã—ãŸé–‹ç™ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚

> [!IMPORTANT]
> **åˆã‚ã¦ã®æ–¹ã¸:** ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯é‡è¦ãªã€Œæ†²æ³•ã€ãŒã‚ã‚Šã¾ã™ã€‚
> é–‹ç™ºã‚’å§‹ã‚ã‚‹å‰ã«ã€å¿…ãš **`AGENT.md`** ã‚’èª­ã¿ã€è¨­è¨ˆæ€æƒ³ã¨ãƒ«ãƒ¼ãƒ«ï¼ˆç‰¹ã« `workspace/` ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç®¡ç†ï¼‰ã‚’ç†è§£ã—ã¦ãã ã•ã„ã€‚

---

## âœ¨ ä¸»ãªæ©Ÿèƒ½ (Key Features)

* **AIGen æ¨™æº–æ­è¼‰:** ç”»åƒç”Ÿæˆã€Img2Imgã€Agentå®Ÿè¡Œã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæœ€åˆã‹ã‚‰çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚
* **ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ:** `packages/` ãŒNPM Workspacesã§é€£æºæ¸ˆã¿ã€‚
* **ç’°å¢ƒçµ±ä¸€:** `.tool-versions` ã¨ `.nvmrc` ã«ã‚ˆã‚Šã€Node.js ã¨ Rust ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’çµ±ä¸€ã—ã¾ã™ã€‚
* **Supabaseé€£æº:** é–‹ç™ºãƒãƒ¼ãƒ ã§å…±æœ‰ã™ã‚‹ `Supabase-dev` ç’°å¢ƒã‚’æ´»ç”¨ã€‚

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ (Tech Stack)

| é ˜åŸŸ | æŠ€è¡“é¸å®š |
| :--- | :--- |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | VITE + React + Tailwind CSS |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Shuttle + Axum (Rust) |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | Supabase (PostgreSQL) |
| **ãƒªãƒã‚¸ãƒˆãƒª** | ãƒ¢ãƒãƒ¬ãƒ (NPM Workspaces) |

---

## ğŸš€ æœ€é€Ÿèµ·å‹• (Quick Start)

ãŸã£ãŸ **3ã‚¹ãƒ†ãƒƒãƒ—** ã§é–‹ç™ºã‚’é–‹å§‹ã§ãã¾ã™ï¼

### å‰ææ¡ä»¶ (Prerequisites)

âš ï¸ **å¿˜ã‚Œã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆ:**

ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚è©³ç´°ã¯ [`docs/setup.md`](docs/setup.md) ã‚’å‚ç…§ã€‚

- **Node.js** v20.x ä»¥ä¸Š (`nvm use` ã¾ãŸã¯ `asdf install`)
- **Rust & Cargo** (`curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh`)
- **Shuttle CLI** (`cargo install cargo-shuttle`)
- **Supabase CLI** (`npm install -g supabase`) â† **ã“ã‚Œã‚’å¿˜ã‚ŒãŒã¡ï¼**

### ã‚¹ãƒ†ãƒƒãƒ— 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

âš ï¸ **é‡è¦:** ã‚¢ãƒ—ãƒªåã‚’æŒ‡å®šã—ã¦ã‚¯ãƒ­ãƒ¼ãƒ³ï¼

```bash
# ã‚¢ãƒ—ãƒªåã‚’æŒ‡å®šã—ã¦ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆä¾‹: my-awesome-appï¼‰
git clone https://github.com/yourusername/akatsuki.git my-awesome-app
cd my-awesome-app
npm install
```

### ã‚¹ãƒ†ãƒƒãƒ— 2: Supabase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

[Supabase Dashboard](https://app.supabase.com/) ã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã€‚

1. ã€ŒNew Projectã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’å…¥åŠ›ï¼ˆ**Database Password ã¯æ§ãˆã¦ãŠã**ï¼‰
3. ã€ŒCreate new projectã€ã‚’ã‚¯ãƒªãƒƒã‚¯

è©³ç´°ã¯ [`docs/setup.md`](docs/setup.md) å‚ç…§ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 3: è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ğŸ¯

```bash
npm run setup
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ãŒä»¥ä¸‹ã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œã—ã¾ã™ï¼š

- ğŸ“¦ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå & èª¬æ˜ã®è¨­å®šï¼ˆpackage.json æ›´æ–°ï¼‰
- ğŸ”„ Git å±¥æ­´ã®ã‚¯ãƒªãƒ¼ãƒ³åŒ–ï¼ˆæ–°è¦ãƒªãƒã‚¸ãƒˆãƒªã¨ã—ã¦åˆæœŸåŒ–ï¼‰
- âœ… å‰ææ¡ä»¶ãƒã‚§ãƒƒã‚¯
- ğŸ“ Supabase æƒ…å ±ã®å…¥åŠ›ï¼ˆå¯¾è©±çš„ï¼‰
- ğŸ“ `.env` ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆ
- ğŸ”— Supabase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒªãƒ³ã‚¯
- ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
- âš¡ Edge Functions ãƒ‡ãƒ—ãƒ­ã‚¤
- ğŸ”‘ Secrets è¨­å®šã‚¬ã‚¤ãƒ‰
- ğŸ” ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç¢ºèª
- ğŸ“ åˆå› Git ã‚³ãƒŸãƒƒãƒˆä½œæˆ

**ä»¥ä¸Šï¼** é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã‚¢ãƒ—ãƒªã‚’ç¢ºèªï¼š

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
npm run dev:frontend  # http://localhost:5173

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
npm run dev:backend   # http://localhost:8000
```

---

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—çŠ¶æ³ã®ç¢ºèª

ã„ã¤ã§ã‚‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ï¼š

```bash
npm run setup:check
```

### è©³ç´°ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚„è©³ç´°ãªæ‰‹é †ã¯ [`docs/setup.md`](docs/setup.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
akatsuki/
â”œâ”€â”€ README.md              # (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«) ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
â”œâ”€â”€ AGENT.md              # ã€å¿…èª­ã€‘è¨­è¨ˆæ€æƒ³ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€å…¨ãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ issue.md              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ©ãƒ³
â”œâ”€â”€ package.json          # ãƒ¢ãƒãƒ¬ãƒã®ãƒ«ãƒ¼ãƒˆè¨­å®š
â”œâ”€â”€ .tool-versions        # asdf/miseç”¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
â”œâ”€â”€ .nvmrc                # nvmç”¨Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ app-frontend/     # Frontend (VITE + React)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ .env          # Frontendç’°å¢ƒå¤‰æ•° (Gitç®¡ç†å¤–)
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ app-backend/      # Backend (Shuttle + Axum)
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ .env          # Backendç’°å¢ƒå¤‰æ•° (Gitç®¡ç†å¤–)
â”‚       â”œâ”€â”€ .env.example  # ç’°å¢ƒå¤‰æ•°ã‚µãƒ³ãƒ—ãƒ«
â”‚       â””â”€â”€ Cargo.toml
â”œâ”€â”€ docs/                 # å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (æ‰‹é †æ›¸ã€è¨­è¨ˆæ›¸ãªã©)
â””â”€â”€ workspace/            # (Gitç®¡ç†å¤–) å€‹äººã®ä½œæ¥­å ´
```

### å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å½¹å‰²

| ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | å½¹å‰² |
| :--- | :--- |
| **`README.md`** | **(ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«)** ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ |
| **`AGENT.md`** | **ã€å¿…èª­ã€‘** è¨­è¨ˆæ€æƒ³ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€å…¨ãƒ«ãƒ¼ãƒ« |
| **`issue.md`** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ©ãƒ³ |
| `packages/app-frontend/` | Vite + React ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒª |
| `packages/app-backend/` | Shuttle + Axum ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API |
| `docs/` | ãƒãƒ¼ãƒ ã®å…¬å¼ãƒŠãƒ¬ãƒƒã‚¸ (æ‰‹é †æ›¸ã€è¨­è¨ˆæ›¸) |
| `workspace/` | **(Gitç®¡ç†å¤–)** å€‹äººã®ä½œæ¥­å ´ (ãƒ¡ãƒ¢ã€ä¸‹æ›¸ã) |

---

## ğŸ”§ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§ä½¿ç”¨ã§ãã‚‹ npm scriptsï¼š

### Frontend

```bash
npm run dev:frontend      # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (localhost:5173)
npm run build:frontend    # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
npm run preview:frontend  # ãƒ“ãƒ«ãƒ‰çµæœã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
```

### Backend

```bash
npm run dev:backend       # Shuttle ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run check:backend     # ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯
npm run build:backend     # ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
npm run test:backend      # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run deploy:backend    # Shuttleã¸ãƒ‡ãƒ—ãƒ­ã‚¤
```

---

## ğŸŒ APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

Backend ãŒæä¾›ã™ã‚‹ä¸»è¦ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼š

### Health Check
- **GET** `/health` - ã‚µãƒ¼ãƒãƒ¼ã®ç¨¼åƒçŠ¶æ³ç¢ºèª

### AIGen æ©Ÿèƒ½

#### 1. Text-to-Image (ç”»åƒç”Ÿæˆ)
- **POST** `/api/aigen/text-to-image`
  ```json
  {
    "prompt": "A beautiful sunset over the ocean",
    "model": "stable-diffusion-xl",
    "width": 1024,
    "height": 1024
  }
  ```

#### 2. Image-to-Image (ç”»åƒå¤‰æ›)
- **POST** `/api/aigen/image-to-image`
  ```json
  {
    "source_image_url": "https://example.com/image.png",
    "prompt": "Convert to anime style",
    "model": "stable-diffusion-xl",
    "strength": 0.75
  }
  ```

#### 3. Agent Execute (LLMã‚¿ã‚¹ã‚¯å®Ÿè¡Œ)
- **POST** `/api/aigen/agent-execute`
  ```json
  {
    "task": "Summarize this text...",
    "model": "gpt-4",
    "system_prompt": "You are a helpful assistant"
  }
  ```

è©³ç´°ã¯ `packages/app-backend/README.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“š ã•ã‚‰ã«è©³ã—ã

- **è¨­è¨ˆæ€æƒ³ã¨ãƒ«ãƒ¼ãƒ«:** `AGENT.md` ã‚’å¿…ãšèª­ã‚“ã§ãã ã•ã„
- **Backendè©³ç´°:** `packages/app-backend/README.md`
- **ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †:** `docs/guide/` (ä»Šå¾Œè¿½åŠ äºˆå®š)

---

## ğŸ¤ é–‹ç™ºæ–¹é‡

- **Supabase-devç’°å¢ƒã®å…±æœ‰:** ãƒãƒ¼ãƒ ï¼ˆ1ã€œ2åï¼‰ã§é–‹ç™ºç”¨Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å…±æœ‰ã—ã¾ã™
- **workspace/ ã®æ´»ç”¨:** å€‹äººã®ãƒ¡ãƒ¢ã‚„ä¸‹æ›¸ãã¯ `workspace/` ã«ä¿å­˜ã—ã¾ã™ï¼ˆGitç®¡ç†å¤–ï¼‰
- **ãƒ¢ãƒãƒ¬ãƒç®¡ç†:** å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `packages/` ã«é…ç½®ã—ã¾ã™

---

**Akatsuki** ã§æœ€é«˜ã® 0â†’1 é–‹ç™ºä½“é¨“ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã—ã‚‡ã†ï¼ ğŸš€
